# API 테스트에 대해


## API란?

**API**(Application Programming Interface,응용 프로그램 프로그래밍 인터페이스)는 응용 프로그램에서 사용될 수 있도록 운영 체제나 프로그래밍 언어가 제공하는 기능을 제어할 수 있게 만든 **인터페이스**를 뜻함. 주로 파일, 창, 문자 제어, 화상 처리 등을 위한 인터페이스를 제공함. 
+ <span style="color:gray">예) 휴대폰에서 응용 프로그램을 실행하면 인터넷에 연결되고 서버에 데이터를 보냄.</span>
+ <span style="color:gray">ㅡ>서버가 해당 데이터를 검색, 해석하여 필요 작업을 수행 후 다시 핸드폰으로 보냄. </span>
+ <span style="color:gray">ㅡ> 응용 프로그램은 이 데이터를 해석 후 원하는 정보를 읽기 쉬운 방식으로 제공함.</span>



<img src="https://imqadotblog.files.wordpress.com/2018/12/how-an-api-works.png" width = "600" height="200">

---

## API 테스트란?

직접 API를 테스트하고 API가 **기능의 안정성**, **성능**, **보안 측면**에서 기대치를 충족하는지 API를 확인하기 위한 통합 테스팅의 일환으로 수행되는 소프트웨어 테스팅의 한 유형임.

<img src="http://wisestone.kr/img/content/testservice_white_wh2.png"  width= "600" height ="300">

---

## API 테스트의 특징

+ API 테스팅의 **주요 관심사** : 소프트웨어 아키텍터의 비즈니스 로직 레이어 (소프트웨어 아키텍트 : 전문가로 간주되는 소프트웨어 개발자)
+ 여러 API가 포함 된 **모든 소프트웨어 시스템**에서 수행 가능
+ API 테스팅은 애플리케이션의 **룩앤필(모양, 느낌)에 집중하지 않음**.

---

## API 테스트의 출력 종류
1. 모든 유형의 데이터
2. 상태(통과, 실패)
3. 다른 API함수를 호출하시오.
---

## API 테스트 사례
+ **입력 조건에 따른 반환 값** : 입력 정의, 결과 인증이 가능해 테스트가 비교적 쉬움.
+ **아무것도 반환하지 않음** : 반환 값이 없는 경우 시스템의 API 동작을 확인함.
+ **다른 API / 이벤트 / 인터럽트 트리거** : API 출력이 일부 이벤트 또는 인터럽트를 트리거 하는 경우 해당 이벤트 및 인터럽트 리스너를 추적해야함.
      ( 인터럽트 : 마이크로프로세서(CPU)가 프로그램을 실행중일 때, 입출력 하드웨어 등의 장치에 예외상황이 발생해 처리가 필요할 경우에 CPU에게 알려 처리할 수 있도록 하는 것)
+ **데이터 구조 업데이트** : 데이터 구조를 업데이트하면 시스템에 어떤 결과나 영향이 있을 수 있으므로 인증을 받아야 함.
+ **특정 리소스 수정** : API 호출이 일부 리소스를 수정하는 경우 해당 리소스에 엑세스 해 유효성을 검사해야 함.

## UI 테스트 VS API 테스트

#### UI 테스트 <span style="color:gray>(응용 프로그램의 그래픽 인터페이스 부분을 테스트하는 것)</span>

**주요 초점 : 응용 프로그램의 룩앤필(모양, 느낌)**

### API 테스트

**서로 다른 두 소프트웨어 시스템 간의 통신을 테스트하는 것이 가능함.**

**주요 초점 : 응용 프로그램의 비즈니스 계층**

---

## API 테스트의 종류

+ **단위** 테스트 : **개별 연산**의 기능을 테스트함.
+ **기능** 테스트 : 더 **넓은 시나리오의 기능**을 테스트하기 위해. 유닛 테스트의 그룹하여 블록으로 테스트하여 결과를 도출함. (다양한 조건및 상황을 다 테스팅하는 블록 테스팅 / 시나리오 기반의 테스팅을 하는 것으로 판단됨) 
+ **부하** 테스트 : **부하가 발생한 상황**에서, 기능 및 성능을 테스트함
+ **런타임 / 오류** 감지 : **응용 프로그램을 모니터링**하여 **예외** 및 **리소스 누수** 같은 문제를 식별함.
+ **보안** 테스트 : **외부 위협**으로부터 API의 구현이 안전하도록 보장함.
+ **UI** 테스트 : **사용자 인터페이스**의 모든 측면이 예상대로 작동하는지 확인하기 위해 종단(화면부터 ~ DB까지)간 통합 테스트의 일환으로 수행됨.
+ **상호 운용성 및 WS 준수** 테스트 : 상호 운용성 및 WS 준수 테스트는 **SOAP API에 적용**되는 테스트 유형임. SOAP API 간의 상호 운용성은 웹 서비스 상호 운용성 프로파일에 대한 적합성을 확인함으로써 점검됨. (WS준수 : 는 WS-Addressing, WS-Discovery, WS-Federation, WS-Policy, WS-Security 및 WS-Trust 들이 제대로 구현 및 활용되도록 테스트하는 것)
+ **침투** 테스트 : **침입자**로부터 응용 프로그램의 취약점을 찾기 위해 사용함. 
+ **퍼지** 테스트 : 강제로 크래시를 발생하기 위해 **강제로 시스템에 입력**하여 API를 테스트함.

### API의 일반적 테스트 종류

- 입력 조건을 기반으로 **반환값이 유효**한지 확인함. API 요청에 따라 API의 응답을 검증함.
- API에서 조금이라도 데이터 구조가 변경될때 시스템에서 API의 결과를 잘 **수용하는지 검증**함.
- API가 다른 이벤트를 **트리거**하는지 또는 다른 **API를 호출**하는지 검증함.
- 응답 값(return value)이 없을 때 **API의 올바른 행위(잘 작동하는지)** 를 하는지 검증함.

---

## API 테스트의 장점

1. API 테스트는 GUI 테스트와 비교할 때 **시간 효율적**임. API 테스트 자동화는 더 적은 코드를 요구하므로 더 빠르고 더 나은 테스트 적용 범위를 제공 할 수 있음.
2. API 테스트는 **테스트 비용을 줄이는 데 도움**이됨. API 테스팅을 사용하면 GUI 테스팅 전에 사소한 버그를 발견 할 수 있음. 이러한 사소한 버그는 GUI 테스팅 중에 더 커질 것이므로      API 테스팅에서 해당 버그를 찾는 것은 회사에 비용 효과적 일 것임.
3. API 테스팅은 언어에 **독립적**임.
4. API 테스팅은 **핵심 기능 (Core Functionality) 테스트**에 매우 유용, 사용자 인터페이스없이 API를 테스트 할 수 있음. GUI 테스팅에서 애플리케이션이 핵심 기능을 테스트 할 수있을 때    까지 기다려야함.
5. API 테스팅은 **위험을 줄이는 데 도움**이 됨.

---

## API 테스트에 사용되는 도구

Postman, Katalon Studio, SoapUI, Assertible, Tricentis Tosca, Apigee, JMeter, Rest-Assured, Katare DSL 등Postman, Katalon Studio, SoapUI, Assertible, Tricentis Tosca, Apigee, JMeter, Rest-Assured, Katare DSL 등

---

## API 테스트 VS Unit 단위 테스트

### Umit 단위 테스트 <span style="color:gray">(프로그램 기본 단위인 모듈을 테스트 하는 것. 모듈 테스트라고도 불림.)</span>

+ **개발 팀**에서 수행함.
+ **화이트 박스 테스트**의 한 형태임.
+ 빌드 **전**에 먼저 수행 됨.
+ **소스 코드**가 관련 되어 있음.
+ 테스트 범위가 **제한**되어 있으므로 테스트를 위해 기본적 기능만 고려됨.

### API 테스트

+ **QA 팀**에서 테스트를 수행함.
+ **블랙 박스 테스트**의 한 형태임.
+ 빌드 **후**에 수행 됨.
+ 소스 코드는 API 테스트에 **포함 되지 않음**.
+ 테스트 범위가 범위가 **넓으므로** 작동하는 모든 문제는 테스트를 위해 고려됨.

---

### API 테스트시 발생하는 도전과제

+ 적절한 **매개 변수 및 조합** 선택
+ 매개 변수를 적절히 **분류**
+ 적절한 호출 **순서** 지정 필요 ㅡ> 테스트 적용 **커버리지가 적절치 않을 수 있음**.
+ **출력** 확인 및 검증
+ GUI 없음. ㅡ> **입력 값 제공하기 매우 어려움**.

---

### API 테스트시 발생하는 오류들

1. **성능** 및 **보안** 문제
2. **중복, 누락**된 기능
3. **안정성** 문제
4. 부적절 메시징
5. 호환되지 않는 오류 메커니즘
6. **멀티 스레드** 문제
7. 부적절 오류

---

### API 테스트의 가장 좋은 방법

+ **예측한 결과**들이 나오는지 테스트하기
+ API **과부하** 테스트를 순차적으로 보내기
+ 테스트 **카테고리 별 그룹 API 케이스**
+ **가능한 모든 입력 조합**을 사용해 테스트 케이스 작성하기
+ 테스트하기 쉽도록 API **함수 호출 우선 순위** 지정하기
+ **예상치 못한 문제**를 처리하기 위해 **테스트 작성**하기
+ 가능한한 API 테스트를 **자동화** 하기
